{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Responsive Cart</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            customBlue: '#2B82C3',
            dark: '#1e293b',
          }
        }
      }
    }
  </script>
  <style>
    .swipe-item {
      transition: transform 0.3s;
      touch-action: pan-y;
    }
    .swipe-item.swiped {
      transform: translateX(-80px);
    }
  </style>

  <style>
    /* üåå Star style */
    .star {
      position: absolute;
      width: 2px;
      height: 2px;
      background: white;
      border-radius: 50%;
      animation: twinkle 2s infinite ease-in-out;
      z-index: 0;
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.2; transform: scale(0.8); }
      50% { opacity: 1; transform: scale(1.2); }
    }

    .container {
      position: relative;
      z-index: 0; /* ‚≠ê Ensures content stays above stars */
    }

    .container::before {
      background-image: linear-gradient(-45deg, rgba(68, 129, 235, 0.9), rgba(4, 190, 254, 0.9));
    }
  </style>
</head>
<body class="bg-dark">

  <!-- Mobile Version -->
  <div class="block md:hidden max-w-md mx-auto p-4 bg-dark rounded-2xl shadow-md">

    <!-- Header -->
    <div class="flex items-center justify-between mb-4  text-gray-200 font-bold">
      <button class="text-gray-600 text-xl">
        <a href="{% url 'index' %}"><i class="fas fa-chevron-left"></i></a>
      </button>
      <h2 id="cartmobile" class="text-lg font-semibold">Cart</h2>
      <button id="clearCartBtnMobile" class="text-red-600 text-sm font-semibold cursor-pointer"><span id="clearmobile">Clear</span></button>
    </div>

    <!-- Cart Items -->
    <div id="mobileCart" class="space-y-4">

        {% for product in cartitems %}
          <div dir='ltr' class="relative bg-gray-200 rounded-xl p-4 swipe-item shadow flex items-center gap-4 text-dark" data-id="{{product.id}}">
            <img src="{{product.image1}}" class="w-16 h-16 rounded-lg object-cover" alt="Product" />
            <div class="flex-1">
              <h3 class="font-semibold text-sm"><span id="Quantity2">quantity</span>: {{product.quantity}}</h3>
              <p class="text-xs text-gray-500"><span id="size">Size</span>: {{product.size}}</p>
              <p class="text-xs text-gray-500"><span id='price3'>price</span>: {{product.price}}</p>
              <p class="font-bold text-sm mt-1"><span id="subtotaal1">subtotal</span>: {{product.subtotal}}</p>
            </div>
            <a href="{% url 'users:page_update_product' product.id %}"><i class="fa-solid fa-pen-to-square cursor-pointer text-customBlue absolute right-4 top-1/2 transform -translate-y-1/2 update-btn cursor-pointer"></i></a>
            <i class="fa-solid fa-xmark text-red-600 absolute right-4 top-1/2 transform -translate-y-1/2 hidden delete-btn cursor-pointer"></i>
          </div>
        {% endfor %}

    </div>

    <!-- Coupon Input -->
    <div class="flex items-center gap-2 mt-6 container">
      <input type="text" id='EnterCode' placeholder="Coupon Code" class="flex-1 p-2 border rounded-lg outline-none text-sm bg-gray-200" />
      <button class="bg-customBlue text-white px-4 py-2 rounded-lg text-sm" id="apply">Apply</button>
    </div>

    <!-- Summary -->
    <div class="mt-6  rounded-xl p-4 shadow space-y-2 text-sm text-white border border-customBlue">
      <div class="flex justify-between">
        <span id="items">Items</span>
        <span>{{item_count}}</span>
      </div>
      <div class="flex justify-between">
        <span id="sub2">Subtotal</span>
        <span>${{total_subtotal}}</span>
      </div>
      <div class="flex justify-between mb-2">
        <span id='shipping'>Shipping</span>
        <span>$0.00</span>
      </div>
      <div class="flex justify-between">
        <span id="Coupon">Coupon code</span>
        <span>2324</span>
      </div>
      <div class="flex justify-between">
        <span id="discount">Discount</span>
        <span class="text-red-600">-$2000</span>
      </div>
      <div class="flex justify-between font-semibold text-base">
        <span id="total">Total</span>
        <span>${{total_subtotal}}</span>
      </div>
    </div>

    <!-- Checkout Button -->
    <button class="w-full mt-4 bg-customBlue hover:bg-customBlue text-white py-3 rounded-xl font-bold text-sm shadow" id="proceed">
      Continue (‚Çπ 4268)
    </button>
  </div>




  <!-- Desktop Version -->
<div class="hidden md:block  max-w-6xl mx-auto p-6 container">

    <div class="grid grid-cols-4 gap-8">
       <div class="col-span-3">
           <div class="bg-white rounded-xl overflow-hidden shadow">
              <!-- Header Row -->
              <div class="grid grid-cols-7 text-center bg-customBlue font-bold text-white py-3">
                <div id='dele' >Delete</div>
                <div id='product'>Product</div>
                <div id ='price3' >Price</div>
                <div id ='size'>size</div>
                <div id ='Quantity2'>Quantity</div>
                <div id="subtotaal1">Subtotal</div>
                <div id='update'>update</div>
              </div>
              <!-- Product 1 -->
               {% for product in cartitems %}
                  <div class="grid grid-cols-7 items-center text-center border-b p-4 divs bg-gray-200 text-dark" data-id="{{product.id}}">
                    <div><i class="fa-solid fa-xmark text-red-600 cursor-pointer delete-icon"></i></div>
                    <div class="flex items-center gap-3">
                        <img src="{{ product.image1 }}"class="rounded" alt="">
                    </div>
                    <div>
                       ${{product.price}}
                    </div>
                    <div>
                      {{product.size}}
                    </div>
                    <div class="flex justify-center gap-2 items-center">
                        <button class="bg-gray-200 px-2 rounded">-</button>
                        <span>{{product.quantity}}</span>
                        <button class="bg-gray-200 px-2 rounded">+</button>
                    </div>
                    <div>
                        ${{product.subtotal}}
                    </div>
                    <div>
                        <a href="{% url 'users:page_update_product' product.id %}"><i class="fa-solid fa-pen-to-square cursor-pointer text-customBlue update_btn"></i></a>
                    </div>
                  </div>
               {% endfor %}
        </div>


          <div class="mt-4 flex items-center gap-2">
            <input type="text" class="flex-1 p-2 border rounded outline-none bg-gray-200" id="EnterCode1" placeholder="Coupon Code">
            <button id="apply" class="bg-customBlue text-white px-4 py-2 rounded">Apply Coupon</button>
            <button id="clearCartBtn" class="ml-auto text-sm text-red-600 font-semibold">Clear Shopping Cart</button>
          </div>

        <!-- Message after clearing All products-->
        <div id="emptyCartMsg" class="hidden mt-4 p-4 bg-yellow-100 border border-yellow-400 text-yellow-700 rounded text-center">
          Your cart is empty.
          <a href="/products" class="text-blue-600 underline ml-2">Add Products</a>
        </div>

      </div>
      <div>
        <div class="bg-dark p-6 rounded-xl shadow text-white border border-customBlue">
          <h3 class="font-bold text-lg mb-4" id='order'>Order Summary</h3>
          <div class="flex justify-between mb-2">
            <span id='items'>Items</span><span>{{item_count}}</span>
          </div>
          <div class="flex justify-between mb-2">
            <span id='sub2'>Sub Total</span><span>${{total_subtotal}}</span>
          </div>
          <div class="flex justify-between mb-2">
            <span id='shipping'>Shipping</span><span>$0.00</span>
          </div>
          <div class="flex justify-between mb-2">
            <span id="Coupon">Coupon Code</span><span class="text-red-600">- $10.00</span>
          </div>
          <div class="flex justify-between mb-2">
            <span id="discount">Coupon Discount</span><span class="text-red-600">- $10.00</span>
          </div>
          <div class="flex justify-between text-lg font-bold mt-4">
            <span id="total">Total</span><span>${{total_subtotal}}</span>
          </div>
          <button id="proceed" class="mt-4 w-full bg-customBlue text-white py-2 rounded-lg">Proceed to Checkout</button>
        </div>
        <div class="flex items-center justify-between mb-6 mt-4">
          <a id='back' href="{% url 'index' %}" class="back-btn px-6 py-3 rounded-xl bg-gray-200 text-gray-800 hover:bg-gray-300 transition text-sm font-semibold">
            ‚Üê Back to Home
          </a>
          <div class="text-2xl font-bold">{{product.price}}</div>
        </div>
      </div>
    </div>

  </div>



  <!-- Modal -->
<div id="modal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center hidden z-50 px-4">
  <div class="bg-white w-full max-w-sm p-6 rounded-xl text-center shadow-xl">
    <h2 class="text-xl font-semibold mb-2 text-gray-800" id="Confirm">Confirm Deletion</h2>
    <p class="text-gray-600 mb-4" id="AreYouSure">Are you sure you want to delete this item?</p>
    <div class="flex justify-center gap-4">
      <button id="confirmDelete" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition">Yes</button>
      <button id="cancelDelete" class="bg-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 transition">Cancel</button>
    </div>
  </div>
</div>

  <!-- Modal Befor clearing all products -->
  <div id="modal_all_products" class="fixed inset-0 bg-dark bg-opacity-40 flex items-center justify-center hidden z-50 px-4">
    <div class="bg-white w-full max-w-sm p-6 rounded-xl text-center shadow-xl bg-dark">
      <h2 class="text-xl font-semibold mb-2 text-gray-800" id="ConfirmAll">Confirm Deletion</h2>
      <p class="text-gray-600 mb-4" id="AreYouSureAll">Are you sure? you want to delete All products?</p>
      <div class="flex justify-center gap-4">
        <button id="confirmDelete_all" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition" >Yes</button>
        <button id="cancelDelete_all_products" class="bg-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 transition">Cancel</button>
      </div>
    </div>
  </div>

  <script src="{% static 'js/cart.js' %}"></script>
  <script src="{% static 'js/translation2.js' %}"></script>

</body>
</html>